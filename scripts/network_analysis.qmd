---
title: "Preparing Network Analysis"
author: "Surya Rao"
date: "2025-04-24"
format: pdf
---

The purpose of this file is to...

```{r}
#| label: setup
#| include: false

knitr::opts_chunk$set(eval = FALSE, message = FALSE)

# improve digit and NA display 
options(scipen = 1, knitr.kable.NA = '')

# load packages
library(tidyverse)
library(readr)
library(purrr)
```

```{r}
#| label: read-files

# read clean game data 
game_data <- readRDS("../data/processed/clean_games.rds")

```

```{r}
#| label: network-prep
game_data <- game_data |> arrange(desc(metacritic_score))
short_game_data <- game_data |> slice_head(n = 40) 
short_game_data <- short_game_data |> mutate(isFree = case_when(price == 0 ~ TRUE,
                                                                .default = FALSE))
short_game_data <- short_game_data |> mutate(AdultOnly = case_when(required_age > 17 ~ TRUE,
                                                                .default = FALSE))
short_game_data <- short_game_data |> mutate(AdultOnly = case_when(required_age >= 17 ~ TRUE,
                                                                .default = FALSE))
short_game_data <- short_game_data |> mutate(GreatSteamReview = case_when((positive/(positive + negative)) >= .95 ~ TRUE, .default = FALSE))

short_game_data <- short_game_data |> mutate(categories1 =  strsplit(categories, ", "))
short_game_data <- short_game_data |> mutate(genres1 =  strsplit(genres, ", "))

betterformat <- short_game_data |> unnest_longer(tags) 
simpleformat <- betterformat |> select(name,tags_id)
attempt <- simpleformat |> full_join(simpleformat,simpleformat, by = join_by(tags_id == tags_id))
```


```{r}
#| label: saving-data

# data used for cluster analysis
saveRDS(*********, file = "../data/processed/network_data.RDS")

```


